{
  "symbol": "AAPL",
  "regime_metrics": {
    "BULLISH": {
      "total_return": 0.15815971711470667,
      "sharpe": 1.6931594414761348,
      "max_drawdown": -0.036131972239383164,
      "win_rate": 0.5,
      "avg_trade_return": 0.0018005121328487687,
      "num_trades": 46,
      "avg_position_size": 0.07203253177213827,
      "kelly_stats": {
        "count": 265,
        "mean": 0.07203253177213827,
        "median": 0.0026841427276146604,
        "std": 0.35820547659959007,
        "p10": -0.35277486814085235,
        "p90": 0.5660160425580347
      }
    },
    "SIDEWAYS": {
      "total_return": -0.10869825053754123,
      "sharpe": -1.9564359722894369,
      "max_drawdown": -0.13639601141888968,
      "win_rate": 0.4444444444444444,
      "avg_trade_return": -0.002348762005637945,
      "num_trades": 18,
      "avg_position_size": 0.13084295380782418,
      "kelly_stats": {
        "count": 130,
        "mean": 0.13084295380782418,
        "median": 0.019936796488922298,
        "std": 0.4149120453180779,
        "p10": -0.39398233830086826,
        "p90": 0.7252939415363701
      }
    },
    "BEARISH": {
      "total_return": -0.0006404630589442739,
      "sharpe": 0.0409041250227356,
      "max_drawdown": -0.05101052294711105,
      "win_rate": 0.47058823529411764,
      "avg_trade_return": 0.0016734944448567406,
      "num_trades": 17,
      "avg_position_size": -0.05595938539962779,
      "kelly_stats": {
        "count": 105,
        "mean": -0.05595938539962779,
        "median": 0.0,
        "std": 0.27978014457886463,
        "p10": -0.45204497626799206,
        "p90": 0.26167242982300776
      }
    }
  },
  "transitions": [
    {
      "index": 54,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": -0.0036133210531358317,
      "after_return": -0.0025108881369086955,
      "detection_lag_days": 0
    },
    {
      "index": 76,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": 0.00012694976834093374,
      "after_return": 0.0045538785840162355,
      "detection_lag_days": 0
    },
    {
      "index": 77,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": -0.012880896892703886,
      "after_return": 0.020080997533213685,
      "detection_lag_days": 0
    },
    {
      "index": 79,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": -0.008239623094679183,
      "after_return": 0.01748574804866987,
      "detection_lag_days": 0
    },
    {
      "index": 84,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": 0.01748574804866987,
      "after_return": -0.00935463525298752,
      "detection_lag_days": 0
    },
    {
      "index": 143,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": 0.019657103488569527,
      "after_return": 0.004583372326577351,
      "detection_lag_days": 0
    },
    {
      "index": 147,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": 0.026048007522148753,
      "after_return": 0.00708724184853482,
      "detection_lag_days": 0
    },
    {
      "index": 164,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": -2.4999991632634888e-05,
      "after_return": 0.00012131746472565652,
      "detection_lag_days": 0
    },
    {
      "index": 165,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": 0.0016154647331618754,
      "after_return": -0.00014072271994647334,
      "detection_lag_days": 1
    },
    {
      "index": 166,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": -0.0025586528692662647,
      "after_return": -0.0005149701639565185,
      "detection_lag_days": 0
    },
    {
      "index": 173,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": -0.004517963602058139,
      "after_return": -0.02520894418506414,
      "detection_lag_days": 0
    },
    {
      "index": 175,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": -0.02430898336655274,
      "after_return": -0.0048591231290141534,
      "detection_lag_days": 0
    },
    {
      "index": 183,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": -0.019831016639499266,
      "after_return": -0.0019451698152342933,
      "detection_lag_days": 0
    },
    {
      "index": 187,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": -0.014997600207004025,
      "after_return": -0.008688898350623475,
      "detection_lag_days": 0
    },
    {
      "index": 188,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": -0.0019451698152342933,
      "after_return": -0.0008328267324432259,
      "detection_lag_days": 0
    },
    {
      "index": 205,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": -0.003382609733100783,
      "after_return": -0.0002878724246382358,
      "detection_lag_days": 1
    },
    {
      "index": 208,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": -0.0060766738416357935,
      "after_return": -0.006710969046663906,
      "detection_lag_days": 0
    },
    {
      "index": 210,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": -0.0002878724246382358,
      "after_return": -0.010552645079724865,
      "detection_lag_days": 0
    },
    {
      "index": 212,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": -0.008609839925968088,
      "after_return": 0.005657205228244866,
      "detection_lag_days": 0
    },
    {
      "index": 214,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": -0.005844359187605175,
      "after_return": 0.0085353391524432,
      "detection_lag_days": 0
    },
    {
      "index": 215,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": -0.010552645079724865,
      "after_return": 0.007742653480607542,
      "detection_lag_days": 0
    },
    {
      "index": 216,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": -0.012688442627978969,
      "after_return": 0.01160791253500526,
      "detection_lag_days": 0
    },
    {
      "index": 217,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": 0.005657205228244866,
      "after_return": 0.005665367552339706,
      "detection_lag_days": 0
    },
    {
      "index": 252,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": 0.01099700442210838,
      "after_return": -0.024746707464069817,
      "detection_lag_days": 0
    },
    {
      "index": 262,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": -0.00027522022221715403,
      "after_return": -0.016620603279870805,
      "detection_lag_days": 0
    },
    {
      "index": 263,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": 0.019955106055687066,
      "after_return": -0.019441182944231805,
      "detection_lag_days": 0
    },
    {
      "index": 273,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": 0.007831358671293698,
      "after_return": -0.005772020575606662,
      "detection_lag_days": 0
    },
    {
      "index": 275,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": 0.00830495787746166,
      "after_return": -0.0051616823832324465,
      "detection_lag_days": 0
    },
    {
      "index": 276,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": 0.004195646483251325,
      "after_return": -0.002141260561328795,
      "detection_lag_days": 0
    },
    {
      "index": 284,
      "from": "BULLISH",
      "to": "BEARISH",
      "before_return": -0.0029819701602428195,
      "after_return": 0.0006790540139562928,
      "detection_lag_days": 2
    },
    {
      "index": 285,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": -0.004043858894436592,
      "after_return": -0.004029682097171361,
      "detection_lag_days": 3
    },
    {
      "index": 286,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": -0.0013410701813172388,
      "after_return": 0.008059718689060968,
      "detection_lag_days": 0
    },
    {
      "index": 290,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": -0.004029682097171361,
      "after_return": 0.011277525654437737,
      "detection_lag_days": 0
    },
    {
      "index": 291,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": 0.008059718689060968,
      "after_return": -0.000917948435185223,
      "detection_lag_days": 1
    },
    {
      "index": 335,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": 0.005292641437051326,
      "after_return": 0.0009229520698770255,
      "detection_lag_days": 0
    },
    {
      "index": 341,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": 0.0031074825608445877,
      "after_return": 0.0031420068900354092,
      "detection_lag_days": 1
    },
    {
      "index": 353,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": 0.0003575878634389795,
      "after_return": -0.0020524445758315357,
      "detection_lag_days": 0
    },
    {
      "index": 354,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": 0.0020251087479719043,
      "after_return": -0.003002326560878954,
      "detection_lag_days": 0
    },
    {
      "index": 362,
      "from": "BEARISH",
      "to": "SIDEWAYS",
      "before_return": 0.0034865744474263938,
      "after_return": -0.0024558415085460528,
      "detection_lag_days": 0
    },
    {
      "index": 368,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": 0.00859740445747259,
      "after_return": 0.030834136446480143,
      "detection_lag_days": 0
    },
    {
      "index": 378,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": 0.0014883564316288123,
      "after_return": 0.009648810605037417,
      "detection_lag_days": 0
    },
    {
      "index": 379,
      "from": "SIDEWAYS",
      "to": "BULLISH",
      "before_return": 0.0007892217285383474,
      "after_return": 0.00925010198980436,
      "detection_lag_days": 0
    },
    {
      "index": 390,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": -0.026495437090133356,
      "after_return": 0.053427612000233715,
      "detection_lag_days": 0
    },
    {
      "index": 391,
      "from": "SIDEWAYS",
      "to": "BEARISH",
      "before_return": -0.014723075938161467,
      "after_return": 0.0834125235200116,
      "detection_lag_days": 1
    },
    {
      "index": 394,
      "from": "BEARISH",
      "to": "BULLISH",
      "before_return": 0.016942764790806475,
      "after_return": 0.0655434792846068,
      "detection_lag_days": 0
    },
    {
      "index": 496,
      "from": "BULLISH",
      "to": "SIDEWAYS",
      "before_return": -0.00042658152083419054,
      "after_return": -0.02252801170388019,
      "detection_lag_days": 0
    }
  ],
  "transition_summary": {
    "SIDEWAYS->BEARISH": {
      "count": 12,
      "avg_before_return": -0.002584532749002203,
      "avg_after_return": 0.0049673959700323456,
      "avg_detection_lag_days": 0.25
    },
    "BEARISH->SIDEWAYS": {
      "count": 12,
      "avg_before_return": -0.000769213467973077,
      "avg_after_return": -0.00048142985069234606,
      "avg_detection_lag_days": 0.25
    },
    "SIDEWAYS->BULLISH": {
      "count": 10,
      "avg_before_return": 0.0032059866667029204,
      "avg_after_return": 0.004616488623582627,
      "avg_detection_lag_days": 0.1
    },
    "BULLISH->SIDEWAYS": {
      "count": 10,
      "avg_before_return": -0.0028431859697643502,
      "avg_after_return": 0.0022622564824411164,
      "avg_detection_lag_days": 0.1
    },
    "BULLISH->BEARISH": {
      "count": 1,
      "avg_before_return": -0.0029819701602428195,
      "avg_after_return": 0.0006790540139562928,
      "avg_detection_lag_days": 2.0
    },
    "BEARISH->BULLISH": {
      "count": 1,
      "avg_before_return": 0.016942764790806475,
      "avg_after_return": 0.0655434792846068,
      "avg_detection_lag_days": 0.0
    }
  }
}